<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Happy Birthday üå∏</title>

<!-- Libraries -->
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Satoshi:wght@400;500;700&display=swap" rel="stylesheet">

<style>
html,body {
  margin:0;
  height:100%;
  overflow:hidden;
  background:#0c0a09;
  color:#f3f3f3;
  font-family:'Satoshi',sans-serif;
}
#bgCanvas, #three-bg {
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  z-index:-2;
}
#three-bg { z-index:-1; }
.aurora {
  position:absolute;
  width:100%;
  height:100%;
  background: radial-gradient(circle at 20% 20%, hsla(333,70%,55%,.4), transparent 40%),
              radial-gradient(circle at 80% 30%, hsla(282,82%,54%,.3), transparent 40%),
              radial-gradient(circle at 40% 80%, hsla(210,89%,60%,.3), transparent 40%),
              radial-gradient(circle at 70% 70%, hsla(35,90%,60%,.3), transparent 40%);
  filter: blur(120px);
  animation: auroraShift 15s ease-in-out infinite alternate;
}
@keyframes auroraShift {
  0% { transform: translateY(0px) scale(1);}
  50% { transform: translateY(-20px) scale(1.05);}
  100% { transform: translateY(20px) scale(1);}
}

/* Progress bar */
#progress {
  position:fixed;
  top:0;
  left:50%;
  transform:translateX(-50%);
  width:80%;
  height:6px;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(8px);
  border-radius:9999px;
  overflow:hidden;
  z-index:50;
}
#progress .bar {
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#ff89c9,#ff3d6e);
  transition:width 0.6s ease;
}

/* Card styles */
.card {
  max-width:480px;
  margin:auto;
  padding:2rem;
  border:1px solid rgba(255,255,255,0.2);
  border-radius:1rem;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(20px);
  box-shadow:0 8px 32px rgba(0,0,0,0.3);
  text-align:center;
  transform:scale(0.95);
  opacity:0;
}
h1,h2 {
  font-family:'Playfair Display',serif;
  background:linear-gradient(90deg,#ffcbe5,#fff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
button {
  background:linear-gradient(90deg,#ff89c9,#ff3d6e);
  border:none;
  color:white;
  font-weight:600;
  border-radius:9999px;
  padding:0.75rem 1.5rem;
  margin-top:1.5rem;
  cursor:pointer;
  box-shadow:0 0 15px rgba(255,80,150,0.6);
  transition:transform 0.25s ease,box-shadow 0.25s ease;
}
button:hover {
  transform:scale(1.05);
  box-shadow:0 0 25px rgba(255,80,150,1);
}
button:active {
  transform:scale(0.95);
}

/* Step container */
#steps {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

/* Bento grid */
.bento {
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:1rem;
  margin-top:1rem;
}
.bento div {
  padding:1rem;
  border-radius:0.75rem;
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.1);
}
.bento div.large { grid-column:span 2; }

/* Polaroid */
.polaroid {
  background:white;
  padding:0.5rem;
  display:inline-block;
  border-radius:0.5rem;
  box-shadow:0 8px 20px rgba(0,0,0,0.4);
  transform:rotate(-3deg);
  transition:transform 0.4s ease;
}
.polaroid img {
  width:100%;
  border-radius:0.25rem;
}
.polaroid:hover {
  transform:rotate(0deg) scale(1.05);
}

/* Finale text */
#final-message {
  opacity:0;
  font-size:1.25rem;
  margin-top:1rem;
}
</style>
</head>

<body>
<div class="aurora"></div>
<canvas id="three-bg"></canvas>
<div id="progress"><div class="bar"></div></div>

<div id="steps">

  <!-- Step 1 -->
  <div class="card step" id="step1">
    <div class="text-5xl mb-4 animate-pulse">‚ù§Ô∏è</div>
    <h1 class="text-3xl mb-2">Hey Buddy,</h1>
    <p>I made something special to make your day brighter. Ready to see it?</p>
    <button onclick="nextStep()">Let's Begin</button>
  </div>

  <!-- Step 2 -->
  <div class="card step" id="step2">
    <div class="text-5xl mb-4">üéâ</div>
    <h1 class="text-3xl mb-2">Happy Birthday!</h1>
    <p>Another amazing year of you being you! The world‚Äôs truly better with you in it.</p>
    <button onclick="nextStep()">There's more...</button>
  </div>

  <!-- Step 3 -->
  <div class="card step" id="step3">
    <h2 class="text-2xl mb-2">A Few Things I Adore About You</h2>
    <div class="bento">
      <div class="large"><h3>‚ú® Your Kindness</h3><p>You make everyone feel special just by being yourself.</p></div>
      <div><h3>üòä That Smile</h3><p>Instantly brightens the room.</p></div>
      <div class="large"><h3>üåü Your Spirit</h3><p>Your energy and passion are absolutely contagious.</p></div>
    </div>
    <button onclick="nextStep()">Remember this?</button>
  </div>

  <!-- Step 4 -->
  <div class="card step" id="step4">
    <h2 class="text-2xl mb-2">That One Time...</h2>
    <div class="flex justify-center my-4">
      <div class="polaroid">
        <img src="https://i.ibb.co/6Z6XgCg/crush.webp" alt="Memory">
        <p class="text-black text-center mt-1">Our favorite memory.</p>
      </div>
    </div>
    <p>Every moment with you feels like a scene worth replaying forever.</p>
    <button onclick="nextStep()">One last thing...</button>
  </div>

  <!-- Step 5 -->
  <div class="card step" id="step5">
    <div class="text-5xl mb-4">üéÇ</div>
    <h2 class="text-3xl mb-2">My Wish For You</h2>
    <p>May your year overflow with laughter, love, and countless beautiful moments. You truly deserve all the happiness in the world.</p>
    <div id="final-message">Happy Birthday, my dear friend! ‚ù§Ô∏è</div>
    <button id="celebrateBtn" onclick="celebrate()">Celebrate!</button>
  </div>
</div>

<script>
// GSAP step logic
let currentStep = 0;
const steps = document.querySelectorAll('.step');
const progressBar = document.querySelector('#progress .bar');

function showStep(index) {
  steps.forEach((s,i)=>{
    gsap.to(s,{opacity:0,scale:0.95,duration:0.5,display:'none'});
  });
  const step = steps[index];
  gsap.to(step,{opacity:1,scale:1,duration:0.8,display:'block',ease:'power2.out'});
  progressBar.style.width = ((index)/ (steps.length-1))*100 + '%';
}
function nextStep(){
  if(currentStep < steps.length-1){
    currentStep++;
    showStep(currentStep);
  }
}
showStep(0);

// Celebration sequence
function celebrate(){
  const btn = document.getElementById('celebrateBtn');
  btn.disabled = true;
  gsap.to(btn,{opacity:0,duration:0.5});
  gsap.to('#final-message',{opacity:1,y:-20,duration:1,delay:0.6});

  // Confetti bursts
  const duration = 5 * 1000;
  const end = Date.now() + duration;
  (function frame(){
    confetti({
      particleCount: 6,
      startVelocity: 30,
      spread: 360,
      ticks: 60,
      origin: { x: Math.random(), y: Math.random() - 0.2 }
    });
    if(Date.now() < end) requestAnimationFrame(frame);
  })();

  // Heart swirl fade
  hearts.forEach(h=>{
    gsap.to(h.position,{
      y: h.position.y+5,
      x: h.position.x+(Math.random()-0.5)*5,
      z: h.position.z+(Math.random()-0.5)*5,
      duration:3,
      ease:'power2.out'
    });
    gsap.to(h.material,{opacity:0,duration:3,delay:1});
  });
}

// Three.js floating hearts
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({canvas:document.getElementById('three-bg'),alpha:true});
renderer.setSize(window.innerWidth, window.innerHeight);
camera.position.z = 5;

// Heart geometry
function createHeartShape(){
  const x=0,y=0;
  const heartShape = new THREE.Shape();
  heartShape.moveTo(x+0.25,y+0.25);
  heartShape.bezierCurveTo(x+0.25,y+0.25,x,y,x-0.25,y);
  heartShape.bezierCurveTo(x-0.5,y,x-0.5,y+0.35,x-0.5,y+0.35);
  heartShape.bezierCurveTo(x-0.5,y+0.55,x-0.3,y+0.8,x,y+1);
  heartShape.bezierCurveTo(x+0.3,y+0.8,x+0.5,y+0.55,x+0.5,y+0.35);
  heartShape.bezierCurveTo(x+0.5,y+0.35,x+0.5,y,x+0.25,y);
  heartShape.bezierCurveTo(x,y,x+0.25,y+0.25,x+0.25,y+0.25);
  return heartShape;
}

const hearts=[];
for(let i=0;i<25;i++){
  const shape=createHeartShape();
  const geo=new THREE.ExtrudeGeometry(shape,{depth:0.2,bevelEnabled:false});
  const mat=new THREE.MeshPhongMaterial({color:new THREE.Color(`hsl(${Math.random()*30+330},80%,60%)`),shininess:100,transparent:true,opacity:0.9});
  const mesh=new THREE.Mesh(geo,mat);
  mesh.position.set((Math.random()-0.5)*10,(Math.random()-0.5)*6,(Math.random()-0.5)*4);
  mesh.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI);
  scene.add(mesh);
  hearts.push(mesh);
}

const light = new THREE.PointLight(0xffffff,1);
light.position.set(0,5,10);
scene.add(light);

function animate(){
  requestAnimationFrame(animate);
  hearts.forEach((h,i)=>{
    h.rotation.y += 0.005;
    h.position.y += Math.sin(Date.now()/1000 + i)*0.0005;
  });
  renderer.render(scene,camera);
}
animate();

window.addEventListener('resize',()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
